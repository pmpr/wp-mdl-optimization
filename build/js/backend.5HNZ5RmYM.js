/*! For license information please see backend.5HNZ5RmYM.js.LICENSE.txt */
(()=>{var e={725:(e,t,a)=>{"use strict";a.r(t)},573:()=>{!function(){const e=PRHelper.getTool(),t=PRBackendHelper.getModal();function a(a,n){PRHelper.getHook().bubbling("click",(n=>{const r=t.getCurrent();r.showSpinner(),PRHelper.getRequest().ajax(PRHelper.getSetting().getOption(`cloudflare.ajax.${a}`)).addNonce().onSuccess((a=>{t.show({type:"success",content:a,onClose:()=>e.reload()})})).onError((t=>{r.showMessage(e.error2string(t))})).onFinally((()=>{r.hideSpinner()})).send()}),n)}a("enable_cache",".pr-opt-cf-enable-cache"),a("disable_dev_mode",".pr-opt-cf-disable-dev-mode")}()},962:()=>{!function(){const e=PRHelper.getHTML(),t=PRHelper.getType(),a=PRHelper.getHook(),n=PRHelper.getForm(),r=PRHelper.getTool(),s=PRHelper.getFormat(),o=PRHelper.getSetting(),p=PRHelper.getRequest(),g=PRBackendHelper.getForm(),l=PRBackendHelper.getModal(),c={onFinish:t=>{const a=t.getData("html");a&&e.fadeIn(t.element,{start:()=>{e.replace(a,t.element,!0)}})},onFail:t=>{const a=t.getData("html");a&&e.fadeIn(t.element,{start:()=>{e.replace(a,t.element,!0)}})}},i=s.parseArgs({autorun:!1},c),d=s.parseArgs({autorun:!0,validator:t=>new Promise(((a,n)=>{p.ajax(o.getOption("pagemanager.ajax.check_pattern_run")).addNonce().onSuccess((e=>{"in-progress"!==e.status?(t.addData("latest_run",e.latest_run),t.addData("pages_cache",e.pages_cache),a(!0)):a(!1)})).onError((e=>{a(!0)})).send({pattern:e.getData(t.element,"pattern")})})),onFinish:t=>{const a=t.getData("latest_run"),n=t.getData("pages_cache");if(n){const a=e.getParent(t.element,"tr"),r=e.getElement(".target-pages-cache",a);e.fadeIn(r,{start:()=>{e.replace(n,r),m(e.getElement(".pr-progress",r))}})}a&&e.fadeIn(t.element,{start:()=>{e.replace(a,t.element,!0)}})}},c);function u(n,s){a.bubbling("click",(a=>{const g=e.getTarget(a,`.pr-opt-pattern-${n}`),c=e.getData(g,"pattern"),i=g.closest(".pr-modal-container"),u=e.getElement(`tr.pattern[data-id="${c}"]`),m=l.getCurrent();m.showSpinner(),p.ajax(o.getOption(`pagemanager.ajax.${s}_pattern`)).addNonce().onSuccess((a=>{if(t.isEmpty(a.pattern_progressbar))r.reload();else{const t=e.getElement(".latest-run-status",u),n=e.getElement(".target-pages-cache",u);e.fadeIn(t,{start:()=>{e.replace(a.pattern_progressbar,t)}}),e.fadeIn(n,{start:()=>{e.replace(a.pages_cache_status,n)}});const r=e.getElement(".pr-progress",t);r?PRProgress.start(r,PRHelper.getFormat().parseArgs({onStart:()=>{m.close()}},d)):m.close()}})).onError((e=>{l.getCurrent().showMessage(r.error2string(e))})).onFinally((()=>{m.hideSpinner()})).send({link:e.getValue(e.getElement("input[name=candidate_page_link]",i)),pattern:c})}),`.pr-opt-pattern-${n}`)}function m(t){const a=PRProgress.start(t,i),n=setInterval((()=>((t,a)=>{a.finished?clearInterval(n):p.ajax(o.getOption("pagemanager.ajax.pages_cache_progress")).addNonce().onSuccess((e=>{void 0!==e.progress?(a.move(Math.floor(e.progress)),e.progress>=100&&(clearInterval(n),a.addData("html",e.status))):(a.addData("html",e.status),a.fail())})).onError((e=>{a.fail(),a.addData("html",e.status),console.log(e)})).onFinally((()=>{})).send({pattern:e.getData(t,"pattern")})})(t,a)),1e4)}function h(t,n){a.bubbling("click",(a=>{const n=e.getTarget(a,"button"),s=e.getData(n,"page"),g=e.getData(n,"status"),c=l.getCurrent();c.showSpinner(),p.ajax(o.getOption(`pagemanager.ajax.${t}`)).addNonce().onSuccess((e=>{l.show({type:"success",content:e,onClose:()=>r.reload()})})).onError((e=>{c.showMessage(r.error2string(e))})).onFinally((()=>{c.hideSpinner()})).send({page:s,status:g})}),n)}t.each(e.getElements(".target-pages-cache > .pr-progress"),(e=>{m(e)})),PRProgress.startAll(d,".pr-progress.pattern-run"),a.bubbling("click",(t=>{const a=e.getTarget(t,"button"),s=e.getData(a,"pattern"),g=e.getParent(a,".pr-modal"),c=n.getFieldValue(e.getElement('textarea[name="json"]',g));l.getCurrent().showSpinner(),p.ajax(o.getOption("pagemanager.ajax.pattern_manual_optimize")).addNonce().onSuccess((e=>{l.getCurrent().close(),l.show({type:"success",content:e,onClose:()=>r.reload()})})).onError((e=>{l.getCurrent().showMessage(r.error2string(e))})).onFinally((()=>{l.getCurrent().hideSpinner()})).send({pattern:s,json:c})}),".pr-opt-pattern-manual-optimize"),a.bubbling("click",(t=>{const a=e.getTarget(t,"button"),n=e.getData(a,"pattern"),s=e.getElement(`tr.pattern[data-id="${n}"]`);l.getCurrent().showSpinner(),p.ajax(o.getOption("pagemanager.ajax.purge_pattern_pages_cache")).addNonce().onSuccess((t=>{l.getCurrent().close(),l.show({type:"success",content:t}),function(t,a){p.ajax(o.getOption("pagemanager.ajax.pages_cache_status")).addNonce().onSuccess((a=>{e.fadeIn(t,{start:()=>{e.replace(a,t);const n=e.getElement(".pr-progress",t);e.isElement(n)&&m(n)}})})).send({pattern:a})}(e.getElement("td > .target-pages-cache",s),n)})).onError((e=>{l.getCurrent().showMessage(r.error2string(e))})).onFinally((()=>{l.getCurrent().hideSpinner()})).send({pattern:n})}),".pr-opt-pattern-purge-pages-cache"),a.on("change paste input",(a=>{const l=e.getTarget(a,"input");n.getFieldContainer(l);n.inputDelay(l,(()=>{let a=e.getValue(l),n=l.closest(".pr-modal-container"),c=e.getElement(".pr-opt-pattern-optimize",n);if(t.isEmpty(a))e.setElementActivity(c,!0,!1);else if(!s.isURL(a)||s.isExternalURL(a))g.showFieldMessage(l,o.getOption("pagemanager.invalid_url"));else{let t=e.getValue(e.getElement("input[name=pattern]",n));e.setElementActivity(c,!1,!1),p.ajax(o.getOption("pagemanager.ajax.check_candidate_link")).addNonce().onSuccess((t=>{g.showFieldMessage(l,"",!1),e.setElementActivity(c,!0,!1)})).onError((e=>{g.showFieldMessage(l,r.error2string(e))})).send({link:a,pattern:t})}}),1500)}),"input[name=candidate_page_link]"),u("setup","setup"),u("re-optimize","reoptimize"),h("change_page_status",".pr-opt-change-page-status"),h("change_page_important_status",".pr-opt-change-page-important-status"),h("change_page_speed_test_candidate_status",".pr-opt-change-page-speed-test-candidate-status"),a.bubbling("click",(()=>{const e=l.getCurrent();e.showSpinner(),p.ajax(o.getOption("pagemanager.ajax.not_dispachable_fixed")).addNonce().onSuccess((e=>{l.show({type:"success",content:e,onClose:()=>r.reload()})})).onError((t=>{e.showMessage(r.error2string(t))})).onFinally((()=>{e.hideSpinner()})).send()}),".pr-opt-speed-test-not-dispachable-fixed"),a.bubbling("click",(()=>{const e=l.getCurrent();e.showSpinner(),p.ajax(o.getOption("pagemanager.ajax.delete_orphan_pages")).addNonce().onSuccess((e=>{l.show({type:"success",content:e,onClose:()=>r.reload()})})).onError((t=>{e.showMessage(r.error2string(t))})).onFinally((()=>{e.hideSpinner()})).send()}),".pr-opt-delete-orphan-pages")}()}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";a(573),a(962);a(725)})()})();