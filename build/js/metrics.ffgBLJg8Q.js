/*! For license information please see metrics.ffgBLJg8Q.js.LICENSE.txt */
!function(){const e=PRHelper.getHTML(),t=PRHelper.getType(),o=PRHelper.getHook(),c=PRHelper.getServer(),n=PRHelper.getRequest(),a=PRHelper.getSetting();o.on("load",s);let r={};function s(){r={},n.ajax(a.getOption("ajax.get_pages")).onSuccess((e=>{const o=e;t.isEmpty(o)||d(o)})).onError((e=>{console.log(e)})).addNonce().send()}function d(e,o=0){if(e.hasOwnProperty(o)){const t=e[o].id,c=e[o].url;i(t,c,"desktop").then((()=>{i(t,c,"mobile").then((()=>{d(e,++o)})).catch((()=>{console.log(error)}))})).catch((e=>{console.log(e)}))}else t.isEmpty(r)||(c=r,n.ajax(a.getOption("ajax.update_pages")).addNonce().onSuccess(s).send({pages:c}));var c}async function i(o,n,a){return new Promise(((s,d)=>{void 0!==r[o]&&void 0!==r[o][a]&&d("metric already extracted.");const i=c.addParams({"dont-opt":1,"calc-metrics":1,device:a},n),l=e.createElement(`<iframe id="calc_metrics" data-device="${a}"  src="${i}" class="${a}"/>`);l.onload=()=>{const e=l.contentWindow.opt_lcp;t.isEmpty(e)?d("can not detect lcp item."):(void 0===r[o]&&(r[o]={}),r[o][a]=e,l.remove(),s("lcp item extracted."))},e.append(l,"body")}))}}();