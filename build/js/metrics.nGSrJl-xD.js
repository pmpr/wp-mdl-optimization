/*! For license information please see metrics.nGSrJl-xD.js.LICENSE.txt */
!function(){const e=PRHelper.getHTML(),t=PRHelper.getType(),o=PRHelper.getHook(),n=PRHelper.getServer(),a=PRHelper.getRequest(),c=PRHelper.getSetting();o.on("load",r);let s={};function r(){s={},a.ajax(c.getOption("ajax.get_pages")).onSuccess((e=>{const o=e;t.isEmpty(o)||d(o)})).onError((e=>{console.log(e)})).addNonce().send()}function d(e,o=0){if(e.hasOwnProperty(o)){const t=e[o].id,n=e[o].url;i(t,n,"desktop").then((()=>{i(t,n,"mobile").then((()=>{d(e,++o)}))}))}else t.isEmpty(s)||(n=s,a.ajax(c.getOption("ajax.update_pages")).addNonce().onSuccess(r).send({pages:n}));var n}async function i(o,a,c){return new Promise(((r,d)=>{void 0!==s[o]&&void 0!==s[o][c]&&d(!1);const i=n.addParams({"dont-opt":1,"calc-metrics":1,device:c},a),p=e.createElement(`<iframe id="calc_metrics" data-device="${c}"  src="${i}" class="${c}"/>`);p.onload=()=>{const e=p.contentWindow.opt_lcp;t.isEmpty(e)?d(!1):(void 0===s[o]&&(s[o]={}),s[o][c]=e,r(!0)),p.remove()},e.append(p,"body")}))}}();