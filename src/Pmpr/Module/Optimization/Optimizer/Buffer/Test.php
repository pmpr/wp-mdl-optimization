<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             68a48905c3fc4             |
    |_______________________________________|
*/
 namespace Pmpr\Module\Optimization\Optimizer\Buffer; use Pmpr\Module\Optimization\Traits\MemoizeTrait; class Test { use MemoizeTrait; protected array $get = []; protected array $post = []; protected ?array $cookies = []; protected ?Config $config = null; protected array $tests = ['uri' => 1, 'ssl' => 0, 'wp_404' => 1, 'search' => 1, 'mobile' => 1, 'is_html' => 1, 'query_string' => 1, 'rejected_cookie' => 1, 'mandatory_cookie' => 1, 'donotoptimizepage' => 1]; private array $lastError = []; public function __construct(Config $uiewakwqscemywuo, array $ywmkwiwkosakssii = []) { $this->config = $uiewakwqscemywuo; if (!empty($ywmkwiwkosakssii['tests'])) { $this->eqoemwqyimasccye((array) $ywmkwiwkosakssii['tests']); } if (!isset($ywmkwiwkosakssii['cookies']) && !empty($_COOKIE) && is_array($_COOKIE)) { $ywmkwiwkosakssii['cookies'] = $_COOKIE; } if (!isset($ywmkwiwkosakssii['post']) && !empty($_POST) && is_array($_POST)) { $ywmkwiwkosakssii['post'] = $_POST; } if (!isset($ywmkwiwkosakssii['get']) && !empty($_GET) && is_array($_GET)) { $ywmkwiwkosakssii['get'] = $_GET; } $this->get = !empty($ywmkwiwkosakssii['get']) && is_array($ywmkwiwkosakssii['get']) ? $ywmkwiwkosakssii['get'] : []; $this->post = !empty($ywmkwiwkosakssii['post']) && is_array($ywmkwiwkosakssii['post']) ? $ywmkwiwkosakssii['post'] : []; $this->cookies = !empty($ywmkwiwkosakssii['cookies']) && is_array($ywmkwiwkosakssii['cookies']) ? $ywmkwiwkosakssii['cookies'] : []; if ($this->ayueggmoqeeukqmq()) { $this->post = array_intersect_key($this->ayueggmoqeeukqmq(), ['wp_customize' => '']); } } public function aceaeommyuooiqge() : Config { return $this->config; } public function gequwwueqseakeoq() : bool { if ($this->aiukiaokcgsiomew()) { $this->yauwooaeicgosquo('Dev Mode Enabled and all request is bypass.'); return false; } if ($this->kgkoeoeseyuugaao()) { $this->yauwooaeicgosquo('Robots.txt or .htaccess file is excluded.'); return false; } if ($this->gymgcceeqssmesiu()) { $this->yauwooaeicgosquo('PHP, XML, or XSL file is excluded.'); return false; } if ($this->goecwaaykqoaaagg()) { $this->yauwooaeicgosquo('Admin or AJAX URL is excluded.'); return false; } if ($this->sgsscqasgeyeicoe()) { $this->yauwooaeicgosquo('Admin or AJAX URL is excluded.'); return false; } if (!$this->gooeyogikcusgwuu()) { $this->yauwooaeicgosquo('Request method is not allowed. Page cannot be cached.', ['request_method' => $this->ciyocmkwssocskiy()]); return false; } if (!$this->cskwmweqysskwckg()) { $this->lastError = []; return true; } $uiewakwqscemywuo = $this->aceaeommyuooiqge()->wcsoyaccaqessckk(); if (!$uiewakwqscemywuo['success']) { $this->yauwooaeicgosquo('No config file found', ['config_path' => $uiewakwqscemywuo['path']]); return false; } if ($this->cskwmweqysskwckg('query_string') && !$this->koguieumooaesyww()) { $this->yauwooaeicgosquo('Query string URL is excluded.', $_GET); return false; } if ($this->cskwmweqysskwckg('ssl') & !$this->eqwgocqwoyyykwke()) { $this->yauwooaeicgosquo('SSL cache not applied to page.'); return false; } if ($this->cskwmweqysskwckg('uri') && !$this->qweiomkkuikwugks()) { $this->yauwooaeicgosquo('Page is excluded.'); return false; } if ($this->cskwmweqysskwckg('rejected_cookie') && $this->cokqaygwwygweuyk()) { $this->yauwooaeicgosquo('Excluded cookie found.', ['excluded_cookies' => $this->cokqaygwwygweuyk()]); return false; } if ($this->cskwmweqysskwckg('mandatory_cookie') && !$this->ucigsowcwassokog() && is_array($this->qgymyeqwqaiwmmea())) { $this->yauwooaeicgosquo('Missing mandatory cookie: page not processed.', ['missing_cookies' => $this->qgymyeqwqaiwmmea()]); return false; } if ($this->cskwmweqysskwckg('user_agent') && !$this->mqiqsuksgyekwkii()) { $this->yauwooaeicgosquo('User Agent is excluded.', ['user_agent' => $this->aceaeommyuooiqge()->iuocyymeygwuweag('HTTP_USER_AGENT')]); return false; } $this->lastError = []; return true; } public function ccmucyumocoyusaa(string $moooemyaqewumiay) : bool { if (strlen($moooemyaqewumiay) <= 255) { $this->yauwooaeicgosquo('Buffer content under 255 characters.'); return false; } if (http_response_code() !== 200) { $this->yauwooaeicgosquo('Page is not a 200 HTTP response and cannot be cached.'); return false; } if ($this->cskwmweqysskwckg('donotoptimizepage') && $this->cowcgqokiosgaqic()) { $kgicwkyskyemksca = $this->cmaecekuqkwmemms('PR_OPTIMIZATION_DONT_OPTIMIZE', ''); $this->yauwooaeicgosquo("DONTOPTIMIZEDPAGE is defined. Page cannot be cached: {$kgicwkyskyemksca}"); return false; } if ($this->cskwmweqysskwckg('wp_404') && $this->kmmyuiwaogukwqqi()) { $this->yauwooaeicgosquo('WP 404 page is excluded.'); return false; } if ($this->cskwmweqysskwckg('search') && $this->gouusicsisumuiei() && !$this->smgkuqwqwmcsaauk()) { $this->yauwooaeicgosquo('Search page is excluded.'); return false; } if ($this->cskwmweqysskwckg('is_html')) { if ($this->cmaecekuqkwmemms('REST_REQUEST') || $this->gaiygescoqgyusaa()) { unset($this->tests['is_html']); } } if ($this->cskwmweqysskwckg('is_html') && !$this->qmyusgwkaqieouwi($moooemyaqewumiay)) { $this->yauwooaeicgosquo('No closing </html> was found.'); return false; } $this->lastError = []; return true; } public function iekaosoqsgqsysoo() : bool { return (bool) apply_filters('pr_optimization_allow_to_start_buffer_process', false); } public function kwckyseyuaauaqau() : array { return $this->tests; } public function cskwmweqysskwckg(string $ymqmyyeuycgmigyo = '') : bool { $ccsoeyocyqiuuwgs = $this->kwckyseyuaauaqau(); if (!$ymqmyyeuycgmigyo) { $umuecysoywoumgwo = !empty($ccsoeyocyqiuuwgs); } else { $umuecysoywoumgwo = isset($ccsoeyocyqiuuwgs[$ymqmyyeuycgmigyo]) && $ccsoeyocyqiuuwgs[$ymqmyyeuycgmigyo]; } return apply_filters("pr_optimization_has_{$ymqmyyeuycgmigyo}_test", $umuecysoywoumgwo); } public function eqoemwqyimasccye(array $ccsoeyocyqiuuwgs) { $ccsoeyocyqiuuwgs = array_flip($ccsoeyocyqiuuwgs); $this->tests = array_merge($this->kwckyseyuaauaqau(), $ccsoeyocyqiuuwgs); } public function qmyusgwkaqieouwi(string $moooemyaqewumiay) : bool { return (bool) preg_match('/<\\s*\\/\\s*html\\s*>/i', $moooemyaqewumiay); } public function gaiygescoqgyusaa() : bool { global $wp_rewrite; $uckmmkmoeikwsiqg = '/(?:.+/)?' . $wp_rewrite->feed_base . '(?:/(?:.+/?)?)?$'; return (bool) preg_match("#^({$uckmmkmoeikwsiqg})\$#i", $this->gygiweeesqqckgme()); } public function aiukiaokcgsiomew() { return $this->aceaeommyuooiqge()->get('dev_mode'); } public function kgkoeoeseyuugaao() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $iyiwooigkweeewey = $this->cesqesaeyaoysqaa(); if (!$iyiwooigkweeewey) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $ucasskoyoewwmmii = ['robots.txt', '.htaccess']; foreach ($ucasskoyoewwmmii as $qogsmwakwacwqogk) { if (false !== strpos($iyiwooigkweeewey, '/' . $qogsmwakwacwqogk)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } public function sywgeyscigqsokyg() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $magawcseesgowoeo = $this->aakgigyaookyiaqk(); $aoigowwskiaosqgo = $this->aceaeommyuooiqge()->goqwamweigigmuuu(); if ($magawcseesgowoeo && $aoigowwskiaosqgo && preg_match($aoigowwskiaosqgo, $magawcseesgowoeo, $meyiiwcswqmuggyg)) { if ($meyiiwcswqmuggyg[0] === $magawcseesgowoeo) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } public function gymgcceeqssmesiu() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $iyiwooigkweeewey = $this->cesqesaeyaoysqaa(); if (!$iyiwooigkweeewey) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } if (strtolower($iyiwooigkweeewey) === '/index.php') { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $uwumuuykwookaauo = pathinfo($iyiwooigkweeewey, PATHINFO_EXTENSION); $wscgwsmykwacamuy = ['php' => 1, 'xml' => 1, 'xsl' => 1]; $amacwkesaqcumiwk = $uwumuuykwookaauo && isset($wscgwsmykwacamuy[$uwumuuykwookaauo]); return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $amacwkesaqcumiwk); } public function goecwaaykqoaaagg() : bool { return is_admin() || $this->cmaecekuqkwmemms('DOING_AJAX'); } public function wymyeyweagqomiim() : bool { return in_array(strtolower((string) $this->aceaeommyuooiqge()->iuocyymeygwuweag('HTTPS')), ['on', '1']) || '443' === (string) $this->aceaeommyuooiqge()->iuocyymeygwuweag('SERVER_PORT'); } public function sgsscqasgeyeicoe() : bool { return isset($this->ayueggmoqeeukqmq()['wp_customize']); } public function gooeyogikcusgwuu() : bool { $ickwkwoiegqacgqq = ['GET' => 1, 'HEAD' => 1]; return isset($ickwkwoiegqacgqq[$this->ciyocmkwssocskiy()]); } public function koguieumooaesyww() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $eyagkkkqkwcuygso = $this->sgqsyoyomwumyoky(); if (!$eyagkkkqkwcuygso) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $yccgiaiouekkouay = ['s' => 1, 'lang' => 1, 'permalink_name' => 1, 'lp-variation-id' => 1]; if (array_intersect_key($eyagkkkqkwcuygso, $yccgiaiouekkouay)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $yccgiaiouekkouay = $this->aceaeommyuooiqge()->get('cache_query_strings'); if (!$yccgiaiouekkouay) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $yciaosuiyeieceug = (bool) array_intersect_key($eyagkkkqkwcuygso, array_flip($yccgiaiouekkouay)); return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $yciaosuiyeieceug); } public function cokqaygwwygweuyk() { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $osqkgokmuiasuukg = $this->wemyikwikgwqwuoc(); if (!$osqkgokmuiasuukg) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $eymuoguywceaakys = $this->aceaeommyuooiqge()->wymiuaugeeigmmuc(); if (!$eymuoguywceaakys) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $eiocugauqgouiuyi = []; foreach (array_keys($osqkgokmuiasuukg) as $aecgggeoymywyumm) { if (preg_match($eymuoguywceaakys, $aecgggeoymywyumm)) { $eiocugauqgouiuyi[] = $aecgggeoymywyumm; } } if (!empty($eiocugauqgouiuyi)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $eiocugauqgouiuyi); } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } public function qgymyeqwqaiwmmea() { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $aaswuawqmusoucsw = $this->aceaeommyuooiqge()->mqoiyygukoqkmwie(); if (!$aaswuawqmusoucsw) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $yiycakoikkyuokgk = array_flip(explode('|', $this->aceaeommyuooiqge()->get('cache_mandatory_cookies'))); if (!$this->wemyikwikgwqwuoc()) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $yiycakoikkyuokgk); } foreach (array_keys($this->wemyikwikgwqwuoc()) as $askcwwaauwqisyeq) { if (preg_match($aaswuawqmusoucsw, $askcwwaauwqisyeq)) { unset($yiycakoikkyuokgk[$askcwwaauwqisyeq]); } } if (empty($yiycakoikkyuokgk)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], array_flip($yiycakoikkyuokgk)); } public function cowcgqokiosgaqic() : bool { return apply_filters('pr_optimization_override_dont_optimize', $this->cmaecekuqkwmemms('PR_OPTIMIZATION_DONT_OPTIMIZE', false)); } public function kmmyuiwaogukwqqi() : bool { return function_exists('is_404') && is_404(); } public function gouusicsisumuiei() : bool { return function_exists('is_search') && is_search(); } public function smgkuqwqwmcsaauk() : bool { return !apply_filters('pr_optimization_optimize_search', false); } public function eqwgocqwoyyykwke() : bool { return !$this->wymyeyweagqomiim() || $this->aceaeommyuooiqge()->get('cache_ssl'); } public function yaswyamuyysomccg() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $uowwycywwssskuys = $this->ckaoiscoyuuosace(); if (!$uowwycywwssskuys) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } if ($this->aceaeommyuooiqge()->get('mobile_cache')) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $wayquiskgeuoqamk = '2.0\\ MMP|240x320|400X240|AvantGo|BlackBerry|Blazer|Cellphone|Danger|DoCoMo|Elaine/3.0|EudoraWeb|Googlebot-Mobile|hiptop|IEMobile|KYOCERA/WX310K|LG/U990|MIDP-2.|MMEF20|MOT-V|NetFront|Newt|Nintendo\\ Wii|Nitro|Nokia|Opera\\ Mini|Palm|PlayStation\\ Portable|portalmmm|Proxinet|ProxiNet|SHARP-TQ-GX10|SHG-i900|Small|SonyEricsson|Symbian\\ OS|SymbianOS|TS21i-10|UP.Browser|UP.Link|webOS|Windows\\ CE|WinWAP|YahooSeeker/M1A1-R2D2|iPhone|iPod|Android|BlackBerry9530|LG-TU915\\ Obigo|LGE\\ VX|webOS|Nokia5800'; if (preg_match("#^.*({$wayquiskgeuoqamk}).*#i", $uowwycywwssskuys)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } $wayquiskgeuoqamk = 'w3c\\ |w3c-|acs-|alav|alca|amoi|audi|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-|dang|doco|eric|hipt|htc_|inno|ipaq|ipod|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-|lg/u|maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|palm|pana|pant|phil|play|port|prox|qwap|sage|sams|sany|sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo|teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|wap-|wapa|wapi|wapp|wapr|webc|winw|winw|xda\\ |xda-'; if (preg_match("#^({$wayquiskgeuoqamk}).*#i", $uowwycywwssskuys)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } public function mqiqsuksgyekwkii() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $uowwycywwssskuys = $this->ckaoiscoyuuosace(); if (!$uowwycywwssskuys) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $mqsuiayuwmwqaqwm = $this->aceaeommyuooiqge()->get('cache_reject_ua'); if (!$mqsuiayuwmwqaqwm) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], !preg_match("#{$mqsuiayuwmwqaqwm}#", $uowwycywwssskuys)); } public function qweiomkkuikwugks() { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $escsaeeosigewsme = $this->aceaeommyuooiqge()->get('cache_reject_uri'); if (!$escsaeeosigewsme) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $yciaosuiyeieceug = !preg_match("#^({$escsaeeosigewsme})\$#i", $this->cesqesaeyaoysqaa()); return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $yciaosuiyeieceug); } public function ckaoiscoyuuosace() { return $this->aceaeommyuooiqge()->iuocyymeygwuweag('HTTP_USER_AGENT'); } public function mmscegoieayuaguo() { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $yygmoeguaqyumuui = [ 'HTTP_CF_CONNECTING_IP', 'HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_X_REAL_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', 'REMOTE_ADDR', ]; foreach ($yygmoeguaqyumuui as $uusmaiomayssaecw) { if ($kucumcusyyckayas = $this->aceaeommyuooiqge()->iuocyymeygwuweag($uusmaiomayssaecw)) { $kucumcusyyckayas = explode(',', $kucumcusyyckayas); $kucumcusyyckayas = end($kucumcusyyckayas); if (false !== filter_var($kucumcusyyckayas, FILTER_VALIDATE_IP)) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], $kucumcusyyckayas); } } } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], '0.0.0.0'); } public function ucigsowcwassokog() : bool { if ($this->koeusmomaqogossg(__FUNCTION__)) { return $this->eecucukcqkqysiau(__FUNCTION__); } $yywgiquyoymymqwk = [ '208.70.247.157' => '', '172.255.48.130' => '', '172.255.48.131' => '', '172.255.48.132' => '', '172.255.48.133' => '', '172.255.48.134' => '', '172.255.48.135' => '', '172.255.48.136' => '', '172.255.48.137' => '', '172.255.48.138' => '', '172.255.48.139' => '', '172.255.48.140' => '', '172.255.48.141' => '', '172.255.48.142' => '', '172.255.48.143' => '', '172.255.48.144' => '', '172.255.48.145' => '', '172.255.48.146' => '', '172.255.48.147' => '', '52.229.122.240' => '', '104.214.72.101' => '', '13.66.7.11' => '', '13.85.24.83' => '', '13.85.24.90' => '', '13.85.82.26' => '', '40.74.242.253' => '', '40.74.243.13' => '', '40.74.243.176' => '', '104.214.48.247' => '', '157.55.189.189' => '', '104.214.110.135' => '', '70.37.83.240' => '', '65.52.36.250' => '', '13.78.216.56' => '', '52.162.212.163' => '', '23.96.34.105' => '', '65.52.113.236' => '', '172.255.61.34' => '', '172.255.61.35' => '', '172.255.61.36' => '', '172.255.61.37' => '', '172.255.61.38' => '', '172.255.61.39' => '', '172.255.61.40' => '', '52.237.235.185' => '', '52.237.250.73' => '', '52.237.236.145' => '', '104.41.2.19' => '', '191.235.98.164' => '', '191.235.99.221' => '', '191.232.194.51' => '', '104.211.143.8' => '', '104.211.165.53' => '', '52.172.14.87' => '', '40.83.89.214' => '', '52.175.57.81' => '', '20.188.63.151' => '', '20.52.36.49' => '', '52.246.165.153' => '', '51.144.102.233' => '', '13.76.97.224' => '', '102.133.169.66' => '', '52.231.199.170' => '', '13.53.162.7' => '', '40.123.218.94' => '', ]; if (isset($yywgiquyoymymqwk[$this->mmscegoieayuaguo()])) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], true); } $uowwycywwssskuys = $this->aceaeommyuooiqge()->iuocyymeygwuweag('HTTP_USER_AGENT'); if (!$uowwycywwssskuys) { return $this->woqeaywukmiuaiyu(__FUNCTION__, [], false); } return $this->woqeaywukmiuaiyu(__FUNCTION__, [], (bool) preg_match('#PingdomPageSpeed|DareBoost|Google|PTST|Chrome-Lighthouse|WP Rocket#i', $uowwycywwssskuys)); } public function aakgigyaookyiaqk() : string { $iyiwooigkweeewey = $this->aceaeommyuooiqge()->iuocyymeygwuweag('REQUEST_URI', ''); if ($iyiwooigkweeewey) { $iyiwooigkweeewey = '/' . ltrim($iyiwooigkweeewey, '/'); } return $iyiwooigkweeewey; } public function gygiweeesqqckgme() : string { $magawcseesgowoeo = $this->cesqesaeyaoysqaa(); $magawcseesgowoeo = $this->sqmacmcaaqkqsoqq($magawcseesgowoeo); if (!$magawcseesgowoeo) { return ''; } $agoaugssmsiumiym = $this->meucmyuaiwgqiqia(); if (!$agoaugssmsiumiym) { return $magawcseesgowoeo; } return "{$magawcseesgowoeo}?{$agoaugssmsiumiym}"; } public function cesqesaeyaoysqaa() : string { if ($magawcseesgowoeo = $this->aakgigyaookyiaqk()) { $magawcseesgowoeo = explode('?', $magawcseesgowoeo); $magawcseesgowoeo = reset($magawcseesgowoeo); } return $magawcseesgowoeo; } public function ciyocmkwssocskiy() : string { return strtoupper($this->aceaeommyuooiqge()->iuocyymeygwuweag('REQUEST_METHOD', '')); } public function sgqsyoyomwumyoky() : array { $ouwwgcimmokaqgeq = $this->gkwaaeusmsaywikg(); $eyagkkkqkwcuygso = []; if ($ouwwgcimmokaqgeq) { $ekaeqaueouiymaue = (array) $this->aceaeommyuooiqge()->get('cache_ignored_parameters'); $eyagkkkqkwcuygso = array_diff_key($ouwwgcimmokaqgeq, $ekaeqaueouiymaue); if ($eyagkkkqkwcuygso) { ksort($eyagkkkqkwcuygso); } } return $eyagkkkqkwcuygso; } private function sqmacmcaaqkqsoqq(string $euueacigmgoqkimu) { $aqykuigiuwmmcieu = ''; while (strpos($euueacigmgoqkimu, './') !== false || strpos($euueacigmgoqkimu, '/.') !== false || '.' === $euueacigmgoqkimu || '..' === $euueacigmgoqkimu) { if (strpos($euueacigmgoqkimu, '../') === 0) { $euueacigmgoqkimu = substr($euueacigmgoqkimu, 3); } else { if (strpos($euueacigmgoqkimu, './') === 0) { $euueacigmgoqkimu = substr($euueacigmgoqkimu, 2); } else { if (strpos($euueacigmgoqkimu, '/./') === 0) { $euueacigmgoqkimu = substr($euueacigmgoqkimu, 2); } else { if ('/.' === $euueacigmgoqkimu) { $euueacigmgoqkimu = '/'; } else { if (strpos($euueacigmgoqkimu, '/../') === 0) { $euueacigmgoqkimu = substr($euueacigmgoqkimu, 3); $aqykuigiuwmmcieu = substr_replace($aqykuigiuwmmcieu, '', strrpos($aqykuigiuwmmcieu, '/')); } else { if ('/..' === $euueacigmgoqkimu) { $euueacigmgoqkimu = '/'; $aqykuigiuwmmcieu = substr_replace($aqykuigiuwmmcieu, '', strrpos($aqykuigiuwmmcieu, '/')); } else { if ('.' === $euueacigmgoqkimu || '..' === $euueacigmgoqkimu) { $euueacigmgoqkimu = ''; } else { if (strpos($euueacigmgoqkimu, '/', 1) !== false) { $yuyowiyumyysomoy = strpos($euueacigmgoqkimu, '/', 1); $aqykuigiuwmmcieu .= substr($euueacigmgoqkimu, 0, $yuyowiyumyysomoy); $euueacigmgoqkimu = substr_replace($euueacigmgoqkimu, '', 0, $yuyowiyumyysomoy); } else { $aqykuigiuwmmcieu .= $euueacigmgoqkimu; $euueacigmgoqkimu = ''; } } } } } } } } } return $aqykuigiuwmmcieu . $euueacigmgoqkimu; } public function meucmyuaiwgqiqia() : string { return http_build_query($this->sgqsyoyomwumyoky()); } public function wemyikwikgwqwuoc() : ?array { return $this->cookies; } public function ayueggmoqeeukqmq() : array { return $this->post; } public function gkwaaeusmsaywikg() : array { return $this->get; } public function log(string $uamcoiueqaamsqma, array $icwicymcioeyeyek = []) { if ($this->cmaecekuqkwmemms('PR_DEBUG', false)) { $icwicymcioeyeyek['permalink'] = $this->aakgigyaookyiaqk(); if (function_exists('pr_get_foundation')) { pr_get_foundation()->caokeucsksukesyo()->mskuyeumceaigegs()->debug($uamcoiueqaamsqma, $icwicymcioeyeyek); } else { if ($icwicymcioeyeyek) { $uamcoiueqaamsqma .= ': ' . print_r($icwicymcioeyeyek, true); } error_log($uamcoiueqaamsqma); } } } public function wwckmeoskuagomki(string $ymqmyyeuycgmigyo, $eqgoocgaqwqcimie) { if (!@defined($ymqmyyeuycgmigyo)) { @define($ymqmyyeuycgmigyo, $eqgoocgaqwqcimie); } } public function cmaecekuqkwmemms(string $ymqmyyeuycgmigyo, $ggauoeuaesiymgee = null) { $ksaameoqigiaoigg = $ggauoeuaesiymgee; if (@defined($ymqmyyeuycgmigyo)) { $ksaameoqigiaoigg = constant($ymqmyyeuycgmigyo); } return $ksaameoqigiaoigg; } public function wkcsqoiqoeuccaqy() : array { return $this->lastError; } public function yauwooaeicgosquo(string $uamcoiueqaamsqma, array $icwicymcioeyeyek = []) { $icwicymcioeyeyek['url'] = $this->aakgigyaookyiaqk(); $this->lastError = ['message' => $uamcoiueqaamsqma, 'context' => $icwicymcioeyeyek]; } }
